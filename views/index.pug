extends layout

block content
  h1 Brisbane Events Explorer
  h2 Find events for you!
  h3 Select your desired options below to ensure you're always at the best event in Brisvegas, at prime time. 
  ul Filters
    li Event type
    li No rain
    li UV protection not required
    li None
  p Up to 200 events shown, as per filters
  table
    tr
      th Event
      th Time
      th Information
      each event in events
        tr
          td
            h4 !{event.title} 
            if event.eventImage != NULL 
              //- Make sure that eventImage is not null
              - const eventImageObjString = JSON.stringify(event.eventImage)
              - const eventImageObj = JSON.parse(eventImageObjString)
              - let eventImageUrl = JSON.stringify(eventImageObj.url);
              - let eventImageUrlCleaned = eventImageUrl.replace(/"/g, ""); //- remove double quotes from URL
              img.image(src=eventImageUrlCleaned) 
            else
              div Image not found
          td
            p Starts: #{event.startDateTime}
            p Ends: #{event.endDateTime}
          td 
            p !{event.description} 
            br
            p !{event.webLink}




